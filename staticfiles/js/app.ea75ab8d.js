(function(){"use strict";var e={5520:function(e,t,a){var o=a(3751),n=a(641);const r={id:"app"};function i(e,t,a,o,i,s){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(l)])}var s={name:"App",data(){return{isAuthenticated:!1}},created(){this.checkAuthentication()},methods:{checkAuthentication(){const e=localStorage.getItem("authToken");this.isAuthenticated=!!e}},watch:{$route(){this.checkAuthentication()}}},l=a(6262);const u=(0,l.A)(s,[["render",i]]);var c=u,d=a(5220),p=a(33);const m=e=>((0,n.Qi)("data-v-2a01abe6"),e=e(),(0,n.jt)(),e),h={class:"home-container"},f=m((()=>(0,n.Lk)("h1",null,"ようこそ",-1))),g={key:0},k={key:1};function v(e,t,a,o,r,i){const s=(0,n.g2)("AppHeader"),l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(s),(0,n.Lk)("div",h,[f,r.isLoggedIn?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("p",null,"Welcome, "+(0,p.v_)(r.username)+"!",1)])):((0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("p",null,[(0,n.eW)("Please "),(0,n.bF)(l,{to:"/login"},{default:(0,n.k6)((()=>[(0,n.eW)("login")])),_:1}),(0,n.eW)(" or "),(0,n.bF)(l,{to:"/register"},{default:(0,n.k6)((()=>[(0,n.eW)("register")])),_:1}),(0,n.eW)(".")])]))])])}const b={class:"app-header"},L={class:"header-content"};function y(e,t,a,o,r,i){const s=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("header",b,[(0,n.Lk)("div",L,[(0,n.Lk)("nav",null,[(0,n.bF)(s,{to:"/"},{default:(0,n.k6)((()=>[(0,n.eW)("Home")])),_:1}),(0,n.bF)(s,{to:"/sitter-search"},{default:(0,n.k6)((()=>[(0,n.eW)("Search")])),_:1}),r.isAuthenticated?((0,n.uX)(),(0,n.Wv)(s,{key:0,to:"/profile"},{default:(0,n.k6)((()=>[(0,n.eW)("Profile")])),_:1})):(0,n.Q3)("",!0),r.isAuthenticated?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e)),class:"logout-button"},"Logout")):(0,n.Q3)("",!0)])])])}a(4114);var A={name:"AppHeader",data(){return{isAuthenticated:!1}},created(){this.checkAuthentication()},methods:{checkAuthentication(){const e=localStorage.getItem("authToken");this.isAuthenticated=!!e},logout(){localStorage.removeItem("authToken"),this.isLoggedIn=!1,this.username="",this.$router.push("/login")}},watch:{$route(){this.checkAuthentication()}}};const w=(0,l.A)(A,[["render",y],["__scopeId","data-v-3089ee3c"]]);var C=w,_=a(4335),E={name:"HomePage",components:{AppHeader:C},data(){return{isLoggedIn:!1,username:""}},async mounted(){this.checkAuthentication()},methods:{async checkAuthentication(){const e=localStorage.getItem("authToken");if(e)try{const t=await _.A.get("http://localhost:8000/api/user/",{headers:{Authorization:`Token ${e}`}});console.log("API Response:",t.data),this.isLoggedIn=!0,this.username=t.data.username||"Guest"}catch(t){console.error("Failed to fetch user information",t),localStorage.removeItem("authToken"),this.isLoggedIn=!1}}}};const P=(0,l.A)(E,[["render",v],["__scopeId","data-v-2a01abe6"]]);var T=P;const I=e=>((0,n.Qi)("data-v-2f8be5a5"),e=e(),(0,n.jt)(),e),S={class:"register-container"},X=I((()=>(0,n.Lk)("h1",null,"新規登録",-1))),j={class:"input-group"},D=I((()=>(0,n.Lk)("label",{for:"username"},"ユーザー名",-1))),F={class:"input-group"},O=I((()=>(0,n.Lk)("label",{for:"email"},"メールアドレス",-1))),U={class:"input-group"},V=I((()=>(0,n.Lk)("label",{for:"password"},"パスワード",-1))),W=I((()=>(0,n.Lk)("button",{type:"submit"},"登録する",-1)));function J(e,t,a,r,i,s){return(0,n.uX)(),(0,n.CE)("div",S,[X,(0,n.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>s.register&&s.register(...e)),["prevent"]))},[(0,n.Lk)("div",j,[D,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e)},null,512),[[o.Jo,i.username]])]),(0,n.Lk)("div",F,[O,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>i.email=e)},null,512),[[o.Jo,i.email]])]),(0,n.Lk)("div",U,[V,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e)},null,512),[[o.Jo,i.password]])]),W],32)])}var $={name:"RegisterPage",data(){return{username:"",email:"",password:""}},methods:{async register(){console.log("Register method called");try{const e=await _.A.post("http://localhost:8000/api/register/",{name:this.username,email:this.email,password:this.password});console.log("Registration successful:",e.data),alert("登録が成功しました！")}catch(e){e.response?e.response.data.email?(console.error("Registration failed: This email is already registered."),alert("このメールアドレスは既に登録されています。別のメールアドレスを使用してください。")):(console.error("Registration failed:",e.response.data),alert("登録に失敗しました。再度お試しください。")):(console.error("Registration failed:",e.message),alert("登録に失敗しました。再度お試しください。"))}}}};const H=(0,l.A)($,[["render",J],["__scopeId","data-v-2f8be5a5"]]);var R=H;const Q=e=>((0,n.Qi)("data-v-75950ebc"),e=e(),(0,n.jt)(),e),x={class:"login-container"},q=Q((()=>(0,n.Lk)("h1",null,"ログイン",-1))),K={class:"input-group"},z=Q((()=>(0,n.Lk)("label",{for:"email"},"メールアドレス",-1))),M={class:"input-group"},G=Q((()=>(0,n.Lk)("label",{for:"password"},"パスワード",-1))),B=Q((()=>(0,n.Lk)("button",{type:"submit",class:"login-button"},"Login",-1))),N={class:"register-link"};function Y(e,t,a,r,i,s){const l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",x,[q,(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>s.login&&s.login(...e)),["prevent"]))},[(0,n.Lk)("div",K,[z,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),autocomplete:"email",required:""},null,512),[[o.Jo,i.email]])]),(0,n.Lk)("div",M,[G,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),autocomplete:"current-password",required:""},null,512),[[o.Jo,i.password]])]),B],32),(0,n.Lk)("p",N,[(0,n.bF)(l,{to:"/register"},{default:(0,n.k6)((()=>[(0,n.eW)("新規登録の方はこちら")])),_:1})])])])}var Z={name:"LoginPage",data(){return{email:"",password:""}},methods:{async login(){try{const e=await _.A.post("http://localhost:8000/api/login/",{email:this.email,password:this.password});localStorage.setItem("authToken",e.data.token),this.$router.push("/"),console.log(e.data)}catch(e){console.error("ログインに失敗しました:",e),alert("ログインに失敗しました。再度お試しください。")}}}};const ee=(0,l.A)(Z,[["render",Y],["__scopeId","data-v-75950ebc"]]);var te=ee;const ae=e=>((0,n.Qi)("data-v-a303c83c"),e=e(),(0,n.jt)(),e),oe={class:"sitter-search-container"},ne=ae((()=>(0,n.Lk)("h1",null,"シッター検索",-1))),re={class:"input-group"},ie=ae((()=>(0,n.Lk)("label",{for:"prefecture"},"都道府県",-1))),se=["value"],le=ae((()=>(0,n.Lk)("label",{for:"city"},"市区町村",-1))),ue=["value"],ce={class:"input-group"},de=ae((()=>(0,n.Lk)("label",{for:"startDate"},"開始日",-1))),pe={class:"input-group"},me=ae((()=>(0,n.Lk)("label",{for:"startTime"},"開始時間",-1))),he={class:"input-group"},fe=ae((()=>(0,n.Lk)("label",{for:"endDate"},"終了日",-1))),ge={class:"input-group"},ke=ae((()=>(0,n.Lk)("label",{for:"endTime"},"終了時間",-1))),ve=ae((()=>(0,n.Lk)("button",{type:"submit"},"検索する",-1))),be={key:0,class:"results"},Le=ae((()=>(0,n.Lk)("h2",null,"検索結果",-1)));function ye(e,t,a,r,i,s){const l=(0,n.g2)("AppHeader");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(l),(0,n.Lk)("div",oe,[ne,(0,n.Lk)("form",{onSubmit:t[7]||(t[7]=(0,o.D$)(((...e)=>s.searchSitters&&s.searchSitters(...e)),["prevent"]))},[(0,n.Lk)("div",re,[ie,(0,n.bo)((0,n.Lk)("select",{id:"prefecture","onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedPrefecture=e),onChange:t[1]||(t[1]=(...e)=>s.updateCities&&s.updateCities(...e))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.prefectures,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.name,value:e.name},(0,p.v_)(e.name),9,se)))),128))],544),[[o.u1,i.selectedPrefecture]]),le,(0,n.bo)((0,n.Lk)("select",{id:"city","onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedCity=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.cities,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,p.v_)(e),9,ue)))),128))],512),[[o.u1,i.selectedCity]])]),(0,n.Lk)("div",ce,[de,(0,n.bo)((0,n.Lk)("input",{type:"date",id:"startDate","onUpdate:modelValue":t[3]||(t[3]=e=>i.startDate=e)},null,512),[[o.Jo,i.startDate]])]),(0,n.Lk)("div",pe,[me,(0,n.bo)((0,n.Lk)("input",{type:"time",id:"startTime","onUpdate:modelValue":t[4]||(t[4]=e=>i.startTime=e)},null,512),[[o.Jo,i.startTime]])]),(0,n.Lk)("div",he,[fe,(0,n.bo)((0,n.Lk)("input",{type:"date",id:"endDate","onUpdate:modelValue":t[5]||(t[5]=e=>i.endDate=e)},null,512),[[o.Jo,i.endDate]])]),(0,n.Lk)("div",ge,[ke,(0,n.bo)((0,n.Lk)("input",{type:"time",id:"endTime","onUpdate:modelValue":t[6]||(t[6]=e=>i.endTime=e)},null,512),[[o.Jo,i.endTime]])]),ve],32),i.results.length>0?((0,n.uX)(),(0,n.CE)("div",be,[Le,(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.results,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id},(0,p.v_)(e.name)+" - "+(0,p.v_)(e.location)+" - "+(0,p.v_)(e.price)+"円/時 ",1)))),128))])])):(0,n.Q3)("",!0)])],64)}var Ae={name:"SitterSearch",components:{AppHeader:C},data(){return{prefectures:[],selectedPrefecture:"",cities:[],selectedCity:"",startDate:"",endDate:"",startTime:"",endTime:"",results:[]}},async mounted(){await this.fetchPrefectures()},methods:{async fetchPrefectures(){try{const e=await _.A.get("https://geolonia.github.io/japanese-addresses/api/ja.json"),t=e.data;this.prefectures=Object.keys(t).map((e=>({name:e,cities:t[e]}))),console.log("Processed Prefectures Data:",this.prefectures)}catch(e){console.error("都道府県データの取得に失敗しました:",e)}},updateCities(){const e=this.prefectures.find((e=>e.name===this.selectedPrefecture));this.cities=e?e.cities:[],this.selectedCity=""},async searchSitters(){try{const e=await _.A.get("http://localhost:8000/api/sitters/",{params:{location:this.selectedCity,start_date:this.startDate,end_date:this.endDate,start_time:this.startTime,end_time:this.endTime}});this.results=e.data}catch(e){console.error("検索に失敗しました:",e),alert("検索に失敗しました。再度お試しください。")}}}};const we=(0,l.A)(Ae,[["render",ye],["__scopeId","data-v-a303c83c"]]);var Ce=we;const _e=e=>((0,n.Qi)("data-v-29d98aee"),e=e(),(0,n.jt)(),e),Ee={class:"profile-container"},Pe=_e((()=>(0,n.Lk)("h1",null,"プロフィール",-1))),Te={key:0},Ie=_e((()=>(0,n.Lk)("strong",null,"ユーザー名:",-1))),Se=_e((()=>(0,n.Lk)("strong",null,"メールアドレス:",-1))),Xe={key:1},je={class:"input-group"},De=_e((()=>(0,n.Lk)("label",{for:"username"},"ユーザー名",-1))),Fe={class:"input-group"},Oe=_e((()=>(0,n.Lk)("label",{for:"email"},"メールアドレス",-1))),Ue=_e((()=>(0,n.Lk)("button",{type:"submit"},"保存する",-1)));function Ve(e,t,a,r,i,s){const l=(0,n.g2)("AppHeader");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(l),(0,n.Lk)("div",Ee,[Pe,e.isEditing?((0,n.uX)(),(0,n.CE)("div",Xe,[(0,n.Lk)("form",{onSubmit:t[4]||(t[4]=(0,o.D$)(((...e)=>s.updateProfile&&s.updateProfile(...e)),["prevent"]))},[(0,n.Lk)("div",je,[De,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[1]||(t[1]=e=>i.username=e)},null,512),[[o.Jo,i.username]])]),(0,n.Lk)("div",Fe,[Oe,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>i.email=e)},null,512),[[o.Jo,i.email]])]),Ue,(0,n.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>s.cancelEdit&&s.cancelEdit(...e))},"キャンセル")],32)])):((0,n.uX)(),(0,n.CE)("div",Te,[(0,n.Lk)("p",null,[Ie,(0,n.eW)(" "+(0,p.v_)(i.username),1)]),(0,n.Lk)("p",null,[Se,(0,n.eW)(" "+(0,p.v_)(i.email),1)]),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.editProfile&&s.editProfile(...e))},"編集する")]))])],64)}var We={name:"UserProfile",components:{AppHeader:C},data(){return{isLoggedIn:!1,username:"",email:"",editing:!1}},async mounted(){await this.fetchProfile()},methods:{async fetchProfile(){const e=localStorage.getItem("authToken");try{const t=await _.A.get("http://localhost:8000/api/user/",{headers:{Authorization:`Token ${e}`}});console.log("API Response:",t.data),this.username=t.data.username,this.email=t.data.email}catch(t){console.error("プロフィールの取得に失敗しました:",t)}},editProfile(){this.isEditing=!0},cancelEdit(){this.isEditing=!1,this.fetchProfile()},async updateProfile(){const e=localStorage.getItem("authToken");try{await _.A.put("http://localhost:8000/api/user/",{username:this.username,email:this.email},{headers:{Authorization:`Token ${e}`}}),this.isEditing=!1,alert("プロフィールが更新されました！")}catch(t){console.error("プロフィールの更新に失敗しました:",t),alert("プロフィールの更新に失敗しました。再度お試しください。")}}}};const Je=(0,l.A)(We,[["render",Ve],["__scopeId","data-v-29d98aee"]]);var $e=Je;const He=[{path:"/",name:"Home",component:T,meta:{requiresAuth:!0}},{path:"/register",name:"Register",component:R},{path:"/login",name:"Login",component:te},{path:"/sitter-search",name:"SitterSearch",component:Ce,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:$e}],Re=(0,d.aE)({history:(0,d.LA)("/"),routes:He});Re.beforeEach(((e,t,a)=>{const o=!!localStorage.getItem("authToken");e.matched.some((e=>e.meta.requiresAuth))&&!o?a("/login"):a()}));var Qe=Re;(0,o.Ef)(c).use(Qe).mount("#app")}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,r){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],r=e[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(s=!1,r<i&&(i=r));if(s){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,n,r]}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,i=o[0],s=o[1],l=o[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var c=l(a)}for(t&&t(o);u<i.length;u++)r=i[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(5520)}));o=a.O(o)})();
//# sourceMappingURL=app.ea75ab8d.js.map